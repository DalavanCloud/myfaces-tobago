<?xml version="1.0" encoding="UTF-8"?>

<!--
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
-->

<tc:header fixed="true"
           xmlns:tc="http://myfaces.apache.org/tobago/component"
           xmlns:f="http://java.sun.com/jsf/core">

  <!-- tbd: how to solve this? -->
  <tc:style customClass="bg-inverse"/>

<!--
  <tc:flexLayout columns="auto;*" alignItems="center">

    <tc:image value="image/feather-leaf.png"/>
-->

    <tc:bar id="bar">
      <f:facet name="brand">
        <!-- label="Tobago Demo" contains a NO-BREAK SPACE character -->
        <tc:link image="#{request.contextPath}/image/feather-leaf.png" label="Tobago Demo" id="brand" link="/"/>
      </f:facet>

      <tc:form id="header">

        <tc:links id="commands">

          <tc:link id="config" label="#{demoBundle.menu_config}" omit="true">
            <tc:link label="#{demoBundle.menu_themes}" omit="true">
              <tc:selectOneRadio value="#{clientConfigController.theme}">
                <tc:event action="#{clientConfigController.submit}"/>
                <tc:selectItems value="#{clientConfigController.themeItems}"/>
              </tc:selectOneRadio>
            </tc:link>
            <!--<tc:link action="#{clientConfigController.resetTheme}" label="Reset Theme"/>-->
            <tc:link label="#{demoBundle.menu_locale}">
              <tc:selectOneRadio value="#{clientConfigController.locale}">
                <tc:event action="#{clientConfigController.submit}"/>
                <tc:selectItems value="#{clientConfigController.localeItems}"/>
              </tc:selectOneRadio>
            </tc:link>
            <tc:link action="#{login.resetSession}" label="Reset Session"/>
          </tc:link>

          <tc:link label="#{demoBundle.menu_help}" omit="true">
            <tc:link label="#{demoBundle.menu_about}" omit="true">
              <tc:dataAttribute name="alert-text"
                                value="#{demoBundle.pageTitle} - #{info.version} - #{demoBundle.tobago_url}"/>
            </tc:link>
            <tc:link link="http://myfaces.apache.org/tobago" label="Tobago in the Web"/>
            <tc:link action="/server-info.xhtml" immediate="true" label="Server Info" disabled="#{! info.enabled}"/>
            <tc:link action="/logging-info.xhtml" immediate="true" label="Logging Info"
                        disabled="#{! info.enabled}"/>
            <tc:separator/>
            <tc:link label="Sub-Menu" omit="true">
              <tc:link label="Sub 1" omit="true"/>
              <tc:link label="Sub 2" omit="true"/>
              <tc:link label="Sub 3" omit="true"/>
              <tc:link action="doit" label="Sub 4 ich kann auch selber was" omit="true">
                <tc:link label="Sub 4 1" omit="true"/>
                <tc:link label="Sub 4 2" omit="true"/>
              </tc:link>
              <tc:link label="Sub 5" omit="true">
                <tc:link label="Sub 5 1" omit="true"/>
                <tc:link label="Sub 5 2" omit="true"/>
              </tc:link>
            </tc:link>
          </tc:link>

          <!-- TBD: this is not nice: can we put tc:out or tc:label into the menu?
          or we do that with a popup, oder a lighter variant of a popup -->
          <tc:link omit="true" label="Info" id="headerInfo">
            <tc:link omit="true" label="Theme: #{clientConfigController.localizedTheme}" disabled="true"/>
            <tc:link omit="true" label="Locale: #{clientConfigController.localizedLocale}"/>
            <tc:link omit="true" label="Project Stage: #{facesContext.application.projectStage}"/>
            <tc:link omit="true" label="CSP mode: #{tobagoContext.tobagoConfig.contentSecurityPolicy.mode}"/>
            <tc:link omit="true"
                        label="Requests: #{activityList.values[0].jsfRequest} / AJAX: #{activityList.values[0].ajaxRequest}"/>
          </tc:link>

          <tc:link label="#{demoBundle.menu_test}" omit="true">
            <tc:link id="runtest" label="#{demoBundle.menu_runTest}" link="/faces/test.xhtml"
                     immediate="true" disabled="#{!testController.hasTest()}">
              <f:param name="base" value="#{testController.base}"/>
            </tc:link>
            <tc:link id="closetest" label="#{demoBundle.menu_closeTest}" immediate="true"/>
            <tc:link label="#{demoBundle.menu_runTestAll}" link="/faces/testAll.xhtml" target="_blank"
                     immediate="true" rendered="#{facesContext.isProjectStage('Development')}"/>
            <tc:link label="#{demoBundle.menu_accessAllPages}" link="/faces/testAccessAllPages.xhtml" target="_blank"
                     immediate="true" rendered="#{facesContext.isProjectStage('Development')}"/>
          </tc:link>

        </tc:links>
      </tc:form>

      <f:facet name="after">
        <tc:flexLayout columns="auto;auto">
          <tc:form>
            <tc:flexLayout columns="200px;auto">
              <tc:in placeholder="Search" labelLayout="skip"/>
              <tc:button defaultCommand="true" omit="true" label="go">
                <tc:dataAttribute name="alert-text" value="Sorry: Search not implemented"/>
              </tc:button>
            </tc:flexLayout>
          </tc:form>
          <tc:form id="navbtns">
            <tc:flexLayout columns="auto;auto">
              <tc:buttons>
                <tc:button immediate="true" id="previous"
                           image="fa-angle-left"
                           action="#{navigationState.gotoPrevious}"
                           disabled="#{navigationState.first}"
                           tip="#{demoBundle.footer_previous}"/>
                <tc:button immediate="true" id="next"
                           image="fa-angle-right"
                           action="#{navigationState.gotoNext}"
                           disabled="#{navigationState.last}"
                           tip="#{demoBundle.footer_next}"/>
              </tc:buttons>
              <tc:button action="#{navigationState.toggleViewSource}"
                         image="fa-code"
                         immediate="true" tip="#{demoBundle.footer_viewSource}"/>
            </tc:flexLayout>
          </tc:form>
        </tc:flexLayout>
      </f:facet>
    </tc:bar>

<!--
  </tc:flexLayout>
-->

</tc:header>
