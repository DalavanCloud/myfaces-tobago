<?xml version="1.0" encoding="UTF-8"?>

<!--
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the "License"); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
-->

<tc:header fixed="true"
           xmlns:tc="http://myfaces.apache.org/tobago/component"
           xmlns:f="http://java.sun.com/jsf/core">

  <!-- tbd: how to solve this? -->
  <tc:style customClass="bg-inverse"/>

<!--
  <tc:flexLayout columns="auto;*" alignItems="center">

    <tc:image value="image/feather-leaf.png"/>
-->

    <tc:bar id="bar">
      <f:facet name="brand">
        <tc:link image="image/feather-leaf.png" label="Tobago Demo" id="brand" link="/"/>
      </f:facet>

      <tc:form id="header" inline="true">

        <tc:commands id="commands">

          <tc:command id="config" label="#{overviewBundle.menu_config}" omit="true">
            <tc:command label="#{overviewBundle.menu_themes}" omit="true">
              <tc:selectOneRadio value="#{clientConfigController.theme}">
                <f:facet name="change">
                  <tc:command action="#{clientConfigController.submit}"/>
                </f:facet>
                <tc:selectItems value="#{clientConfigController.themeItems}"/>
              </tc:selectOneRadio>
            </tc:command>
            <tc:command label="#{overviewBundle.menu_locale}">
              <tc:selectOneRadio value="#{clientConfigController.locale}">
                <f:facet name="change">
                  <tc:command action="#{clientConfigController.submit}"/>
                </f:facet>
                <tc:selectItems value="#{clientConfigController.localeItems}"/>
              </tc:selectOneRadio>
            </tc:command>
            <tc:command action="#{demo.resetSession}" label="Reset"/>
          </tc:command>

          <tc:command label="#{overviewBundle.menu_help}" omit="true">
            <tc:command label="#{overviewBundle.menu_about}" omit="true">
              <tc:dataAttribute name="alert-text"
                                value="#{overviewBundle.pageTitle} - #{info.version} - #{overviewBundle.tobago_url}"/>
            </tc:command>
            <tc:command link="http://myfaces.apache.org/tobago" label="Tobago in the Web"/>
            <tc:command action="/server-info.xhtml" immediate="true" label="Server Info" disabled="#{! info.enabled}"/>
            <tc:command action="/logging-info.xhtml" immediate="true" label="Logging Info"
                        disabled="#{! info.enabled}"/>
            <tc:separator/>
            <tc:command label="Sub-Menu" omit="true">
              <tc:command label="Sub 1" omit="true"/>
              <tc:command label="Sub 2" omit="true"/>
              <tc:command label="Sub 3" omit="true"/>
              <tc:command action="doit" label="Sub 4 ich kann auch selber was" omit="true">
                <tc:command label="Sub 4 1" omit="true"/>
                <tc:command label="Sub 4 2" omit="true"/>
              </tc:command>
              <tc:command label="Sub 5" omit="true">
                <tc:command label="Sub 5 1" omit="true"/>
                <tc:command label="Sub 5 2" omit="true"/>
              </tc:command>
            </tc:command>
          </tc:command>

          <!-- TBD: this is not nice: can we put tc:out or tc:label into the menu?
          or we do that with a popup, oder a lighter variant of a popup -->
          <tc:command omit="true" label="Info">
            <tc:command omit="true" label="Theme: #{clientConfigController.localizedTheme}" disabled="true"/>
            <tc:command omit="true" label="Locale: #{clientConfigController.localizedLocale}"/>
            <tc:command omit="true" label="Project Stage: #{tobagoContext.tobagoConfig.projectStage}"/>
            <tc:command omit="true" label="CSP mode: #{tobagoContext.tobagoConfig.contentSecurityPolicy.mode}"/>
            <tc:command omit="true"
                        label="Requests: #{activityList.values[0].jsfRequest} / AJAX: #{activityList.values[0].ajaxRequest}"/>
          </tc:command>

        </tc:commands>
      </tc:form>

      <tc:flowLayout textAlign="right">
        <tc:form inline="true">
          <tc:in placeholder="Search"/>
          <tc:button defaultCommand="true" omit="true" label="go">
            <tc:dataAttribute name="alert-text"
                              value="Sorry: Search not implemented"/>

          </tc:button>
        </tc:form>
        <tc:form id="navbtns" inline="true">
          <tc:button immediate="true" id="previous"
                     image="fa-angle-left"
                     action="#{navigationState.gotoPrevious}"
                     disabled="#{navigationState.first}"
                     tip="#{overviewBundle.footer_previous}"/>
          <tc:button immediate="true" id="next"
                     image="fa-angle-right"
                     action="#{navigationState.gotoNext}"
                     disabled="#{navigationState.last}"
                     tip="#{overviewBundle.footer_next}"/>
          <tc:button action="#{navigationState.toggleViewSource}"
                     image="fa-code"
                     immediate="true" tip="#{overviewBundle.footer_viewSource}"/>
          <tc:button id="runtest"
                     link="/faces/test.xhtml"
                     label="Run Test"
                     immediate="true" tip="Run Test"
                     rendered="#{testController.testJs != null}">
            <f:param name="page" value="#{testController.page}"/>
            <f:param name="testjs" value="#{testController.testJs}"/>
          </tc:button>
          <tc:button id="closetest" label="Close Test"
                     immediate="true" tip="Close test window"/>
        </tc:form>
      </tc:flowLayout>

    </tc:bar>

<!--
  </tc:flexLayout>
-->

</tc:header>
